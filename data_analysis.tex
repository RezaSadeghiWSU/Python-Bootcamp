\documentclass[10pt]{beamer}
\usetheme{Singapore}
\usecolortheme{default}
\usecolortheme{orchid}
\useoutertheme{infolines}
\useinnertheme[shadow=true]{rounded}

\usepackage{multimedia}

\title{Introduction to Python Data Analysis}
\titlegraphic{\includegraphics[height=3.0cm]{../logo.png}}
\author{{Stephen Weston} \and {Robert Bjornson}}
\institute[Yale]{
  Yale Center for Research Computing \\
  Yale University
}
\date{January 2017}
\begin{document}

%----------- titlepage ----------------------------------------------%
\begin{frame}[plain]
  \titlepage
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}
\frametitle{Python for data analysis}
Python is more of a general purpose programming language than
R or Matlab.
It has gradually become more popular for data analysis and
scientific computing, but additional modules are needed.
Some of the more popular modules are:
\begin{description}
\item[NumPy] N-dimensional array
\item[SciPy] Scientific computing (linear algebra, numerical integration, optimization, etc)
\item[Matplotlib] 2D Plotting (similar to Matlab)
\item[IPython] Enhanced Interactive Console
\item[Sympy] Symbolic mathematics
\item[Pandas] Data analysis (provides a data frame structure similar to R)
\end{description}
\vskip10pt
NumPy, SciPy and Matplotlib are used in this presentation.
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{Creating N-dimensional arrays using NumPy}
There are many ways to create N-dimensional arrays
\begin{verbatim}
import numpy as np
# Create 2X3 double precision array initialized to all zeroes
a = np.zeros((2,3), dtype=np.float64)

# Create array initialized by list of lists
a = np.array([[0,1,2],[3,4,5]], dtype=np.float64)

# Create array by reading CSV file
a = np.genfromtxt('data.csv', dtype=np.float64, delimiter=',')

# Create array using "arange" function
a = np.arange(6, dtype=np.float64).reshape(2,3)
\end{verbatim}
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{Get values from N-dimensional array}
NumPy provides many ways to extract data from arrays
\begin{verbatim}
# Print single element of 2D array
print a[0,0]      # a scalar, not an array

# Print first row of 2D array
print a[0,:]      # 1D array

# Print last column of array
print a[:,-1]     # 1D array

# Print sub-matrix of 2D array
print a[0:2,1:3]  # 2D array

\end{verbatim}
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{Modifying N-dimensional arrays}
NumPy uses the same basic syntax for modifying arrays
\begin{verbatim}
# Assign single value to single element of 2D array
a[0,0] = 25.0

# Assign 1D array to first row of 2D array
a[0,:] = np.array([10,11,12], dtype=np.float64)

# Assign 1D array to last column of 2D array
a[:,-1] = np.array([20,21], dtype=np.float64)

# Assign 2D array to sub-matrix of 2D array
a[0:2,1:3] = np.array([[10,11],[20,21]], dtype=np.float64)
\end{verbatim}
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{Modifying arrays using broadcasting}
\begin{verbatim}
# Assign scalar to first row of 2D array
a[0,:] = 10.0

# Assign 1D array to all rows of 2D array
a[:,:] = np.array([30,31,32], dtype=np.float64)

# Assign 1D array to all columns of 2D array
a[:,:] = np.array([40,41], dtype=np.float64).reshape(2,1)

# Assign scalar to sub-matrix of 2D array
a[0:2,1:3] = 100.0
\end{verbatim}
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{Arithmetic on arrays}
Operate on arrays using binary operators and NumPy functions
\begin{verbatim}
# Create 1D array
a = np.arange(4, dtype=np.float64)

# Add 1D arrays elementwise
a + a

# Multiply 1D arrays elementwise
a * a

# Sum elements of 1D array
a.sum()

# Compute dot product
np.dot(a, a)    # same as: (a * a).sum()

# Compute cross product
np.dot(a.reshape(4,1), a.reshape(1,4))
\end{verbatim}
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{NumPy views}
Views are arrays that share memory with another array.

\begin{itemize}
\item views can make your program more memory and CPU efficient
\item views are explicitly generated via the view method
\item reshape and transpose implicitly return views of the original array
\item arrays generated by slicing are views of the original
\item use the copy method to avoid sharing memory
\item set the writeable flag to make a view read-only (a.flags.writeable)
\end{itemize}
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{NumPy views continued}
\vspace{2mm}
\verb|>>> a = np.arange(10)|\\
\pause
\verb|>>> b = a[2::2]|\\
\pause
\verb|>>> a.flags.owndata, b.flags.owndata|\\
\verb|(True, False)|\\
\pause
\verb|>>> b[0] = 100|\\
\pause
\verb|>>> a|\\
\verb|array([  0,   1, 100,   3,   4,   5,   6,   7,   8,   9])|\\
\pause
\verb|>>> a.__array_interface__['data'][0]|\\
\verb|4330625024|\\
\pause
\verb|>>> b.__array_interface__['data'][0]|\\
\verb|4330625040|\\
\pause
\verb|>>> c = b.copy()|\\
\pause
\verb|>>> c.flags.owndata, c.__array_interface__['data'][0]|\\
\verb|(True, 4301585776)|\\
\pause
\verb|>>> d = a|\\
\pause
\verb|>>> d is a|\\
\verb|True|\\

\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{Mini NumPy Cookbook}

\begin{tabular}{l l}
\textit{matrix size}               & a.shape \\
\textit{transpose}                 & a.T \\
\textit{extract diagonal elements} & np.diag(a) \\
\textit{matrix multiply}           & a.dot(b) \\
\textit{element-wise multiply}     & a * b \\
\textit{column sums}               & np.sum(a, axis=0) \\
\textit{row sums}                  & np.sum(a, axis=1) \\
\textit{element sum}               & np.sum(a, axis=None) \\
\textit{column means}              & np.mean(a, axis=0) \\
\textit{column max}                & np.max(a, axis=0) \\
\textit{column min}                & np.min(a, axis=0) \\
\textit{element-wise maximum}      & np.maximum(a, b) \\
\textit{element-wise minimum}      & np.minimum(a, b) \\
\textit{identity matrix}           & np.eye(n) \\
\textit{random matrix}             & np.random.rand(m, n) \\
\textit{set random seed}           & np.random.seed(i) \\
\textit{solve ax=b}                & np.linalg.solve(a, b) \\
\textit{fourier transform}         & np.fft.fft(a) \\

\end{tabular}

\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{SciPy Linear Algebra functions}
\begin{verbatim}
import numpy as np
from scipy import linalg
a = np.array([[1, 2], [3, 4]], dtype=np.float64)

# Compute the inverse matrix
linalg.inv(a)

# Compute singular value decomposition
linalg.svd(a)

# Compute eigenvalues
linalg.eigvals(a)
\end{verbatim}
\end{frame}

%----------- slide --------------------------------------------------%
\begin{frame}[fragile]
\frametitle{2D plotting using Matplotlib}
\begin{verbatim}
import numpy as np
import matplotlib.pyplot as plt
x = np.linspace(0.0, 2.0, 20)

plt.plot(x, np.sqrt(x), 'ro')  # red circles
plt.show()

plt.plot(x, np.sqrt(x), 'b-')  # blue lines
plt.show()

# Three plots in one figure
plt.plot(x, x, 'g--', x, np.sqrt(x), 'ro', x, np.sqrt(x), 'b-')
plt.show()
\end{verbatim}
\end{frame}

\end{document}
